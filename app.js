!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=i(1),o=i(2),r=i(3),s=n(r),c=i(4),u=i(5),l=i(6),f=n(l),d=i(7),h=function(){return requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),m=document.getElementById("canvas"),p=m.getContext("2d"),_=document.getElementById("start_game"),g=document.getElementById("restart_game"),v=document.getElementById("title_audio"),k={goblin:document.getElementById("goblin"),goblin_step:document.getElementById("step"),step_hero:document.getElementById("step_hero"),attack_sound:document.getElementById("attack_sound"),attack_sword:document.getElementById("sword")},y=["/img/bgimg.jpg","/img/heroes/knight_sprite.png","/img/speels_icons/attack.png","/img/speels_icons/def.png","/img/speels_icons/sprint.png","/img/enemy/goblin.png"];(0,a.load_All_Images)(y).then(function(e){var t=new s.default(a.imagesBuffer[1],280,280,10,276,k.attack_sword,k.step_hero),i=new f.default(a.imagesBuffer[5],10,950,400,40,"creep",1,226,k.attack_sound,k.step),n=[i],r={},l={attack:a.imagesBuffer[2],def:a.imagesBuffer[3],sprint:a.imagesBuffer[4]};setInterval(function(){if(y){50===n.length&&(i.enemyArr=[]);var e=Math.round(Math.random())?(0,d.randomNegativeX)(-150,-600):(0,d.randomPositiveX)(900,1300);n.push(new f.default(a.imagesBuffer[5],10,e,(0,d.randomY)(400,620),(0,d.randomY)(10,70),"creep",1,226,k.attack_sound,k.step))}},2e3),document.addEventListener("keydown",function(e){r[e.keyCode]=!0,(0,u.setCondition)(e.keyCode,t),(0,c.move)(r,t,m,e.keyCode)}),document.addEventListener("keyup",function(e){(0,u.resetCondition)(e.keyCode,t),delete r[e.keyCode]});var y=!1,w=Date.now();!function e(){var i=Date.now(),r=(i-w)/1e3;(0,o.render)(y,p,a.imagesBuffer,t,m,r,l,n,e),w=i,h(e)}(),_.addEventListener("click",function(e){y=!0,v.volume=.05}),g.addEventListener("click",function(e){n=[],t.current_life=100,t.death=!1,t.posX=280,t.posY=280,t.score=0})})},function(e,t,i){"use strict";function n(e){return new Promise(function(t){var i=new Image;a.push(i),i.addEventListener("load",function(){t(i)}),i.src=e})}Object.defineProperty(t,"__esModule",{value:!0});var a=[],o=function(e){var t=e.map(function(e){return n(e)});return Promise.all(t)};t.load_All_Images=o,t.imagesBuffer=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.render=function(e,t,i,n,a,o,r,s,c){if(n.death)return t.fillText("THE END",400,360),cancelAnimationFrame(c);t.clearRect(0,0,a.width,a.heigth),t.drawImage(i[0],0,0,a.width,a.height),e&&(t.drawImage(n.sprite,n.frame_horizontal,n.frame_vertical,256,256,n.posX,n.posY,256,256),t.fillStyle="#60BF3F",t.fillRect(n.posX+90,n.posY+30,n.current_life,10),t.drawImage(r.attack,20,20,50,50),t.drawImage(r.def,20,80,50,50),t.drawImage(r.sprint,20,140,50,50),t.font="24px Comic Sans MS",t.fillStyle="#A9491E",t.fillText("ATTACK: "+n.damage+" ( SPACE )",90,55),t.fillText("DEFENCE: "+n.defence,90,115),t.fillText((n.running_mode?"runnnig mode":"walking mode")+" ( R )",90,170),t.fillStyle="red",t.textStyle="black",t.font="48px Comic Sans MS",t.fillText("HP : "+Math.floor(n.current_life),600,60),t.strokeText("HP : "+Math.floor(n.current_life),600,60),t.fillText("Score : "+Math.floor(n.score),600,120),t.strokeText("Score : "+Math.floor(n.score),600,120),s.forEach(function(e){e.die||(t.fillRect(e.positionX+20,e.positionY-10,.8*e.life,10),t.drawImage(e.sprite,e.frame_horizontal,e.frame_vertical,226,256,e.positionX,e.positionY,113,128))}),s.forEach(function(e){e.die||n.attacking&&e.attacking&&(e.life-=n.damage,0===e.life&&(e.die=!0,n.score+=5,Math.random()>.9&&n.current_life<90&&(n.current_life+=10)))}),n.update(o),s.forEach(function(e){e&&e.update(o,n)}))}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments[5]),s=arguments[6];n(this,e),this.sprite=t,this.posX=i,this.posY=a,this.speed=o,this.base_speed=10,this.running_mode=!1,this.running_speed=10,this.size=276,this.frame_horizontal=0,this.frame_vertical=20,this._index=0,this.attacking=!1,this.running_mode=!1,this.life=100,this.current_life=100,this.score=0,this.damage=1,this.death=!1,this.defence=10,this.sound_attack=r,this.sound_step=s}return a(e,[{key:"update",value:function(e){this._index+=this.speed*e,this.frame_horizontal=Math.floor(this._index)%8*this.size,this.frame_horizontal>=2484?this.frame_horizontal=0:this.frame_horizontal}},{key:"walk",value:function(e){this.running_mode?(848===e&&(this.frame_vertical=1400),572===e&&(this.frame_vertical=1124)):this.frame_vertical=e}},{key:"run",value:function(){this.running_mode?this.running_mode=!1:this.running_mode=!0}},{key:"attack",value:function(e){this.frame_vertical=e,this.sound_attack.play()}},{key:"stand",value:function(e){this.frame_vertical=e}},{key:"die",value:function(){this.death=!0}}]),e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.move=function(e,t,i,n){var a=t.running_mode?t.running_speed:5;65 in e&&t.posX>-80&&(t.posX-=a),87 in e&&(t.posY>276?t.posY-=a:t.posY),83 in e&&(t.posY<i.height-t.size+30?t.posY+=a:t.posY),68 in e&&t.posX<i.width-t.size+80&&(t.posX+=a)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setCondition=function(e,t){switch(e){case 65:t.walk(848);break;case 68:t.walk(572);break;case 87:case 83:20===t.frame_vertical?t.walk(572):296===t.frame_vertical&&t.walk(848);break;case 82:t.run();break;case 32:t.attacking=!0,20===t.frame_vertical?t.attack(1676):296===t.frame_vertical&&t.attack(1952)}},t.resetCondition=function(e,t){switch(e){case 65:t.stand(296);break;case 32:t.attacking=!1,1676===t.frame_vertical?t.stand(20):1952===t.frame_vertical&&t.stand(296);break;case 68:t.stand(20);break;case 87:case 83:572===t.frame_vertical||1124===t.frame_vertical?t.stand(20):848!==t.frame_vertical&&1400!==t.frame_vertical||t.stand(296)}}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,a,o,r,s,c,u,l,f){n(this,e),this.sprite=t,this.hp=i,this.positionX=a,this.positionY=o,this.speed=r,this.type=s,this.damage=c,this.frame_horizontal=0,this.frame_vertical=0,this._index=0,this.size=u,this.life=100,this.base_life=100,this.die=!1,this.attacking=!1,this.sound_attack=l,this.sound_step=f}return a(e,[{key:"walk",value:function(e){}},{key:"attack",value:function(e,t){this.sound_attack.play(10),this.attacking=!0,t.current_life-=this.damage*e,t.current_life<=0&&t.die()}},{key:"die",value:function(){}},{key:"update",value:function(e,t){this.die||(this._index+=this.speed*e,this.frame_horizontal=Math.floor(this._index)%8*this.size,this.frame_horizontal>=1582?this.frame_horizontal=0:this.frame_horizontal,this.positionX>t.posX+160?this.positionX-=this.speed*e:this.positionX+=this.speed*e,this.positionY>t.posY+100?this.positionY-=this.speed*e:this.positionY+=this.speed*e,this.positionX>t.posX+128?(this.frame_vertical=0,this.attacking=!1,this.positionY-t.posY<110&&this.positionX-(t.posX+160)<10&&(this.frame_vertical=512,this.attack(e,t))):(this.frame_vertical=256,this.attacking=!1,this.positionY-t.posY<110&&t.posX-this.positionX<10&&(this.frame_vertical=768,this.attack(e,t))))}}]),e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.randomPositiveX=function(e,t){var i=e+Math.random()*(t+1-e);return i=Math.floor(i)},t.randomNegativeX=function(e,t){var i=e+Math.random()*(t+1-e);return i=Math.floor(i)},t.randomY=function(e,t){var i=e+Math.random()*(t+1-e);return i=Math.floor(i)}}]);